{"ast":null,"code":"var _jsxFileName = \"/Users/brycemolnar/Documents/bbbbbb/CS-410-Senior-Project-Editing-Tool/frontend/src/pages/ManuscriptViewer.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Box, Flex, Heading, Text, Image, VStack, Spinner, useToast, Button, useDisclosure, Modal, ModalOverlay, ModalContent, ModalHeader, ModalBody, ModalCloseButton, Input, FormControl, FormLabel, Textarea, IconButton } from '@chakra-ui/react';\nimport NavigationBar from '../components/NavigationBar.tsx';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useDisplaySettings } from '../contexts/DisplaySettingsContext.tsx';\nimport { DragHandleIcon, EditIcon, CheckIcon, CloseIcon } from '@chakra-ui/icons';\n\n// API base URL - can be configured based on environment\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:8000';\nfunction ManuscriptViewer() {\n  _s();\n  const navigate = useNavigate();\n  const {\n    sigla\n  } = useParams();\n  const {\n    settings\n  } = useDisplaySettings();\n  const [manuscript, setManuscript] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedImage, setSelectedImage] = useState(null);\n  const [isUploading, setIsUploading] = useState(false);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const fileInputRef = useRef(null);\n  const {\n    isOpen,\n    onOpen,\n    onClose\n  } = useDisclosure();\n  const {\n    isOpen: isEditOpen,\n    onOpen: onEditOpen,\n    onClose: onEditClose\n  } = useDisclosure();\n  const {\n    isOpen: isDeleteOpen,\n    onOpen: onDeleteOpen,\n    onClose: onDeleteClose\n  } = useDisclosure();\n  const [editedManuscript, setEditedManuscript] = useState(null);\n  const [isSaving, setIsSaving] = useState(false);\n  const toast = useToast();\n  const [draggedIndex, setDraggedIndex] = useState(null);\n  const [editingVerseIndex, setEditingVerseIndex] = useState(null);\n  const [editingVerseText, setEditingVerseText] = useState('');\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragOverIndex, setDragOverIndex] = useState(null);\n  const verseHeight = useRef(0);\n  const [mousePosition, setMousePosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const dragRef = useRef({\n    x: 0,\n    y: 0\n  });\n\n  // Theme-based colors\n  const boxBg = settings.theme === 'dark' ? 'gray.800' : 'white';\n  const textColor = settings.theme === 'dark' ? 'gray.100' : 'gray.900';\n  const borderColor = settings.theme === 'dark' ? 'gray.600' : 'gray.300';\n  const linkColor = settings.theme === 'dark' ? 'blue.300' : 'blue.600';\n  useEffect(() => {\n    async function fetchManuscript() {\n      try {\n        setIsLoading(true);\n        setError(null);\n        const response = await fetch(`${API_BASE_URL}/api/documents/${sigla}.docx`);\n        if (!response.ok) {\n          throw new Error('Failed to fetch manuscript');\n        }\n        const data = await response.json();\n\n        // Transform verses to ensure consistent format\n        const transformedData = {\n          ...data,\n          verses: data.verses.map(verse => {\n            // If verse is a tuple [number, text]\n            if (Array.isArray(verse)) {\n              return {\n                verse_number: parseInt(verse[0]),\n                verse_text: verse[1]\n              };\n            }\n            // If verse is already an object {verse_number, verse_text}\n            return verse;\n          })\n        };\n        setManuscript(transformedData);\n        setEditedManuscript(transformedData);\n      } catch (error) {\n        console.error('Error fetching manuscript:', error);\n        setError(error instanceof Error ? error.message : 'Failed to fetch manuscript');\n      } finally {\n        setIsLoading(false);\n      }\n    }\n    if (sigla) {\n      fetchManuscript();\n    }\n  }, [sigla]);\n  function handleImageClick() {\n    if (fileInputRef.current) {\n      fileInputRef.current.click();\n    }\n  }\n  function handleImageChange(e) {\n    var _e$target$files;\n    const file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = function (e) {\n        var _e$target;\n        setSelectedImage((_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  }\n  async function handleImageUpload() {\n    if (!selectedImage || !manuscript) return;\n    try {\n      setIsUploading(true);\n      const formData = new FormData();\n\n      // Convert base64 to blob\n      const response = await fetch(selectedImage);\n      const blob = await response.blob();\n      formData.append('image', blob, 'manuscript_image.jpg');\n\n      // Add the manuscript data\n      formData.append('document', JSON.stringify({\n        ...manuscript,\n        image_filename: 'manuscript_image.jpg'\n      }));\n      const uploadResponse = await fetch(`${API_BASE_URL}/api/documents/${manuscript.filename}/update`, {\n        method: 'PUT',\n        body: formData\n      });\n      if (!uploadResponse.ok) {\n        throw new Error('Failed to upload image');\n      }\n      const updatedManuscript = await uploadResponse.json();\n      setManuscript(updatedManuscript);\n      onClose();\n      toast({\n        title: 'Image uploaded successfully',\n        status: 'success',\n        duration: 3000,\n        isClosable: true\n      });\n    } catch (error) {\n      toast({\n        title: 'Error uploading image',\n        description: error instanceof Error ? error.message : 'An error occurred',\n        status: 'error',\n        duration: 5000,\n        isClosable: true\n      });\n    } finally {\n      setIsUploading(false);\n    }\n  }\n  const handleEditClick = () => {\n    if (manuscript) {\n      setEditedManuscript({\n        ...manuscript\n      });\n      onEditOpen();\n    }\n  };\n  const handleInputChange = (field, value) => {\n    if (editedManuscript) {\n      setEditedManuscript({\n        ...editedManuscript,\n        metadata: {\n          ...editedManuscript.metadata,\n          [field]: value\n        }\n      });\n    }\n  };\n  const handleDragStart = (e, index) => {\n    setDraggedIndex(index);\n    e.currentTarget.style.opacity = '0.4';\n    e.dataTransfer.effectAllowed = 'move';\n  };\n  const handleDragEnd = e => {\n    e.preventDefault();\n    e.currentTarget.style.opacity = '1';\n    setDraggedIndex(null);\n    setDragOverIndex(null);\n  };\n  const handleDragOver = (e, index) => {\n    e.preventDefault();\n    if (draggedIndex === null || draggedIndex === index) return;\n    setDragOverIndex(index);\n  };\n  const handleDrop = (e, dropIndex) => {\n    e.preventDefault();\n    if (draggedIndex === null || !editedManuscript || draggedIndex === dropIndex) return;\n    const verses = [...editedManuscript.verses];\n    const [movedVerse] = verses.splice(draggedIndex, 1);\n    verses.splice(dropIndex, 0, movedVerse);\n\n    // Update verse numbers\n    const updatedVerses = verses.map((verse, index) => ({\n      ...verse,\n      verse_number: index + 1\n    }));\n    setEditedManuscript({\n      ...editedManuscript,\n      verses: updatedVerses\n    });\n    setDraggedIndex(null);\n    setDragOverIndex(null);\n  };\n  const getVerseStyle = index => {\n    if (index === draggedIndex) {\n      return {\n        opacity: 0.4\n      };\n    }\n    if (index === dragOverIndex) {\n      return {\n        borderTop: '2px solid #4299E1',\n        marginTop: '-1px',\n        backgroundColor: '#EBF8FF'\n      };\n    }\n    return {};\n  };\n  const handleAddVerse = () => {\n    if (editedManuscript) {\n      const verseText = prompt('Enter the verse text:');\n      if (verseText !== null && verseText !== void 0 && verseText.trim()) {\n        const lastVerseNumber = editedManuscript.verses.length > 0 ? editedManuscript.verses[editedManuscript.verses.length - 1].verse_number : 0;\n        setEditedManuscript({\n          ...editedManuscript,\n          verses: [...editedManuscript.verses, {\n            verse_number: lastVerseNumber + 1,\n            verse_text: verseText.trim()\n          }]\n        });\n      }\n    }\n  };\n  const handleRemoveVerse = (e, index) => {\n    e.stopPropagation(); // Prevent event bubbling\n    if (editedManuscript) {\n      const updatedVerses = editedManuscript.verses.filter((_, i) => i !== index).map((verse, i) => ({\n        ...verse,\n        verse_number: i + 1\n      }));\n      setEditedManuscript({\n        ...editedManuscript,\n        verses: updatedVerses\n      });\n    }\n  };\n  const handleSave = async () => {\n    if (!editedManuscript) return;\n    try {\n      setIsSaving(true);\n      const response = await fetch(`${API_BASE_URL}/api/documents/${editedManuscript.filename}/update-manuscript`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(editedManuscript)\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to update manuscript');\n      }\n      const updatedManuscript = await response.json();\n      setManuscript(updatedManuscript);\n      onEditClose();\n      toast({\n        title: 'Manuscript updated successfully',\n        status: 'success',\n        duration: 3000,\n        isClosable: true\n      });\n    } catch (error) {\n      toast({\n        title: 'Error updating manuscript',\n        description: error instanceof Error ? error.message : 'An error occurred',\n        status: 'error',\n        duration: 5000,\n        isClosable: true\n      });\n    } finally {\n      setIsSaving(false);\n    }\n  };\n  const startEditingVerse = index => {\n    setEditingVerseIndex(index);\n    setEditingVerseText((editedManuscript === null || editedManuscript === void 0 ? void 0 : editedManuscript.verses[index].verse_text) || '');\n  };\n  const cancelEditingVerse = () => {\n    setEditingVerseIndex(null);\n    setEditingVerseText('');\n  };\n  const saveVerseEdit = () => {\n    if (editedManuscript && editingVerseIndex !== null) {\n      const updatedVerses = [...editedManuscript.verses];\n      updatedVerses[editingVerseIndex] = {\n        ...updatedVerses[editingVerseIndex],\n        verse_text: editingVerseText.trim()\n      };\n      setEditedManuscript({\n        ...editedManuscript,\n        verses: updatedVerses\n      });\n      setEditingVerseIndex(null);\n      setEditingVerseText('');\n    }\n  };\n  const handleDelete = async () => {\n    if (!manuscript) return;\n    try {\n      setIsDeleting(true);\n      const response = await fetch(`${API_BASE_URL}/api/documents/${manuscript.filename}/delete`, {\n        method: 'DELETE'\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to delete manuscript');\n      }\n      toast({\n        title: 'Manuscript deleted successfully',\n        status: 'success',\n        duration: 3000,\n        isClosable: true\n      });\n\n      // Navigate back to the search page\n      navigate('/search-database');\n    } catch (error) {\n      toast({\n        title: 'Error deleting manuscript',\n        description: error instanceof Error ? error.message : 'An error occurred',\n        status: 'error',\n        duration: 5000,\n        isClosable: true\n      });\n    } finally {\n      setIsDeleting(false);\n      onDeleteClose();\n    }\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      children: [/*#__PURE__*/_jsxDEV(NavigationBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        justify: \"center\",\n        align: \"center\",\n        height: \"calc(100vh - 100px)\",\n        children: /*#__PURE__*/_jsxDEV(Spinner, {\n          size: \"xl\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 7\n    }, this);\n  }\n  if (error || !manuscript) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      children: [/*#__PURE__*/_jsxDEV(NavigationBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        p: 8,\n        children: /*#__PURE__*/_jsxDEV(Text, {\n          color: \"red.500\",\n          children: error || 'Manuscript not found'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(NavigationBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        bg: \"#08004F\",\n        py: 8,\n        px: 6,\n        children: /*#__PURE__*/_jsxDEV(Flex, {\n          justify: \"space-between\",\n          align: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(Heading, {\n            fontWeight: \"normal\",\n            ml: 8,\n            color: \"lightgray\",\n            size: \"lg\",\n            children: \"Manuscript View\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            colorScheme: \"blue\",\n            onClick: handleEditClick,\n            children: \"Edit Manuscript\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        ml: 8,\n        p: 6,\n        children: /*#__PURE__*/_jsxDEV(Flex, {\n          gap: 12,\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            flex: 2,\n            maxW: \"65%\",\n            children: [/*#__PURE__*/_jsxDEV(Flex, {\n              mb: 6,\n              children: [/*#__PURE__*/_jsxDEV(Text, {\n                fontSize: \"lg\",\n                fontWeight: \"normal\",\n                w: \"180px\",\n                color: textColor,\n                children: \"MS ID:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 455,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Text, {\n                fontSize: \"lg\",\n                fontWeight: \"normal\",\n                flex: 1,\n                color: textColor,\n                children: /*#__PURE__*/_jsxDEV(\"u\", {\n                  children: manuscript.metadata['MS ID:']\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 456,\n                  columnNumber: 84\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 456,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Text, {\n                fontSize: \"lg\",\n                fontWeight: \"normal\",\n                ml: 8,\n                color: textColor,\n                children: [\"Sigla: \", /*#__PURE__*/_jsxDEV(\"u\", {\n                  children: manuscript.filename.replace('.docx', '')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 457,\n                  columnNumber: 89\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 457,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(VStack, {\n              spacing: 4,\n              align: \"stretch\",\n              children: [/*#__PURE__*/_jsxDEV(Flex, {\n                children: [/*#__PURE__*/_jsxDEV(Text, {\n                  fontSize: \"lg\",\n                  fontWeight: \"normal\",\n                  w: \"180px\",\n                  color: textColor,\n                  children: \"Other Names:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 462,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Text, {\n                  fontSize: \"lg\",\n                  fontWeight: \"normal\",\n                  color: textColor,\n                  children: /*#__PURE__*/_jsxDEV(\"u\", {\n                    children: manuscript.metadata['Other Names:']\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 463,\n                    columnNumber: 77\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 463,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 461,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Flex, {\n                children: [/*#__PURE__*/_jsxDEV(Text, {\n                  fontSize: \"lg\",\n                  fontWeight: \"normal\",\n                  w: \"180px\",\n                  color: textColor,\n                  children: \"Total Folia:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 466,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Text, {\n                  fontSize: \"lg\",\n                  fontWeight: \"normal\",\n                  color: textColor,\n                  children: /*#__PURE__*/_jsxDEV(\"u\", {\n                    children: manuscript.metadata['Total Folia:']\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 467,\n                    columnNumber: 77\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 467,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 465,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Flex, {\n                children: [/*#__PURE__*/_jsxDEV(Text, {\n                  fontSize: \"lg\",\n                  fontWeight: \"normal\",\n                  w: \"180px\",\n                  color: textColor,\n                  children: \"Laod. Folia:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 470,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Text, {\n                  fontSize: \"lg\",\n                  fontWeight: \"normal\",\n                  color: textColor,\n                  children: /*#__PURE__*/_jsxDEV(\"u\", {\n                    children: manuscript.metadata['Laod Folia:']\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 471,\n                    columnNumber: 77\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 471,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 469,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Flex, {\n                children: [/*#__PURE__*/_jsxDEV(Text, {\n                  fontSize: \"lg\",\n                  fontWeight: \"normal\",\n                  w: \"180px\",\n                  color: textColor,\n                  children: \"Dimensions:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 474,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Text, {\n                  fontSize: \"lg\",\n                  fontWeight: \"normal\",\n                  color: textColor,\n                  children: /*#__PURE__*/_jsxDEV(\"u\", {\n                    children: manuscript.metadata['Dimensions:']\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 475,\n                    columnNumber: 77\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 475,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Flex, {\n                children: [/*#__PURE__*/_jsxDEV(Text, {\n                  fontSize: \"lg\",\n                  fontWeight: \"normal\",\n                  w: \"180px\",\n                  color: textColor,\n                  children: \"Place of Origin:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 478,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Text, {\n                  fontSize: \"lg\",\n                  fontWeight: \"normal\",\n                  color: textColor,\n                  children: /*#__PURE__*/_jsxDEV(\"u\", {\n                    children: manuscript.metadata['Origin:']\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 479,\n                    columnNumber: 77\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 479,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 477,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Flex, {\n                children: [/*#__PURE__*/_jsxDEV(Text, {\n                  fontSize: \"lg\",\n                  fontWeight: \"normal\",\n                  w: \"180px\",\n                  color: textColor,\n                  children: \"Materials:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 482,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Text, {\n                  fontSize: \"lg\",\n                  fontWeight: \"normal\",\n                  color: textColor,\n                  children: /*#__PURE__*/_jsxDEV(\"u\", {\n                    children: manuscript.metadata['Materials:']\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 483,\n                    columnNumber: 77\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 481,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Flex, {\n              mt: 4,\n              mb: 4,\n              children: [/*#__PURE__*/_jsxDEV(Text, {\n                fontSize: \"lg\",\n                fontWeight: \"normal\",\n                w: \"180px\",\n                color: textColor,\n                children: \"Format Description:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Text, {\n                fontSize: \"lg\",\n                fontWeight: \"normal\",\n                flex: 1,\n                color: textColor,\n                children: /*#__PURE__*/_jsxDEV(\"u\", {\n                  children: manuscript.metadata['Format Description:']\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 489,\n                  columnNumber: 84\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 489,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Text, {\n                fontSize: \"lg\",\n                fontWeight: \"normal\",\n                ml: 8,\n                color: textColor,\n                children: [\"Date: \", /*#__PURE__*/_jsxDEV(\"u\", {\n                  children: manuscript.metadata['Date:']\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 490,\n                  columnNumber: 88\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              border: \"1px solid\",\n              borderColor: borderColor,\n              borderRadius: \"md\",\n              p: 4,\n              height: \"500px\",\n              overflowY: \"auto\",\n              bg: boxBg,\n              children: /*#__PURE__*/_jsxDEV(VStack, {\n                spacing: 2,\n                align: \"stretch\",\n                children: manuscript.verses.map((verse, index) => /*#__PURE__*/_jsxDEV(Box, {\n                  children: /*#__PURE__*/_jsxDEV(Text, {\n                    color: textColor,\n                    display: \"inline\",\n                    children: [/*#__PURE__*/_jsxDEV(Text, {\n                      as: \"span\",\n                      cursor: \"pointer\",\n                      color: linkColor,\n                      _hover: {\n                        textDecoration: 'underline'\n                      },\n                      onClick: () => {\n                        navigate(`/verse/${verse.verse_number}`, {\n                          state: {\n                            verseNumber: verse.verse_number,\n                            verseText: verse.verse_text\n                          }\n                        });\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"sup\", {\n                        children: verse.verse_number\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 520,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 506,\n                      columnNumber: 25\n                    }, this), ' ', verse.verse_text]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 505,\n                    columnNumber: 23\n                  }, this)\n                }, `${verse.verse_number}-${index}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 504,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            flex: 1,\n            display: \"flex\",\n            justifyContent: \"flex-start\",\n            children: manuscript.image_filename ? /*#__PURE__*/_jsxDEV(Image, {\n              src: `${API_BASE_URL}/media/${manuscript.image_filename}`,\n              alt: `${manuscript.metadata['Other Names:']} manuscript page`,\n              maxH: \"900px\",\n              objectFit: \"contain\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 532,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Box, {\n              border: \"2px dashed\",\n              borderColor: \"gray.400\",\n              borderRadius: \"md\",\n              height: \"300px\",\n              width: \"100%\",\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              bg: \"gray.100\",\n              cursor: \"pointer\",\n              _hover: {\n                bg: \"gray.200\"\n              },\n              onClick: onOpen,\n              children: /*#__PURE__*/_jsxDEV(VStack, {\n                spacing: 2,\n                children: [/*#__PURE__*/_jsxDEV(Text, {\n                  color: \"gray.500\",\n                  fontSize: \"lg\",\n                  children: \"No image available\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 554,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Text, {\n                  color: \"gray.400\",\n                  fontSize: \"sm\",\n                  children: \"Click to upload an image\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 555,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 553,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: isOpen,\n      onClose: onClose,\n      children: [/*#__PURE__*/_jsxDEV(ModalOverlay, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ModalContent, {\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          children: \"Upload Manuscript Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalCloseButton, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n          pb: 6,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            ref: fileInputRef,\n            onChange: handleImageChange,\n            accept: \"image/*\",\n            style: {\n              display: 'none'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 571,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            border: \"2px dashed\",\n            borderColor: \"gray.400\",\n            borderRadius: \"md\",\n            height: \"300px\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            bg: \"gray.100\",\n            cursor: \"pointer\",\n            _hover: {\n              bg: \"gray.200\"\n            },\n            onClick: handleImageClick,\n            position: \"relative\",\n            overflow: \"hidden\",\n            mb: 4,\n            children: selectedImage ? /*#__PURE__*/_jsxDEV(Image, {\n              src: selectedImage,\n              alt: \"Selected manuscript\",\n              objectFit: \"contain\",\n              maxH: \"100%\",\n              maxW: \"100%\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 595,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(VStack, {\n              spacing: 2,\n              children: [/*#__PURE__*/_jsxDEV(Text, {\n                color: \"gray.500\",\n                fontSize: \"lg\",\n                children: \"Upload image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 604,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Text, {\n                color: \"gray.400\",\n                fontSize: \"sm\",\n                children: \"Click to select a file\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 605,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 603,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 578,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            colorScheme: \"blue\",\n            mr: 3,\n            onClick: handleImageUpload,\n            isLoading: isUploading,\n            width: \"100%\",\n            isDisabled: !selectedImage,\n            children: \"Upload Image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 609,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 567,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 565,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: isEditOpen,\n      onClose: onEditClose,\n      size: \"xl\",\n      children: [/*#__PURE__*/_jsxDEV(ModalOverlay, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ModalContent, {\n        maxW: \"800px\",\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          children: \"Edit Manuscript Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalCloseButton, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 628,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n          pb: 6,\n          children: editedManuscript && /*#__PURE__*/_jsxDEV(VStack, {\n            spacing: 4,\n            children: [/*#__PURE__*/_jsxDEV(FormControl, {\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                children: \"MS ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 633,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                value: editedManuscript.metadata['MS ID:'],\n                onChange: e => handleInputChange('MS ID:', e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 634,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 632,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                children: \"Other Names\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 640,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                value: editedManuscript.metadata['Other Names:'],\n                onChange: e => handleInputChange('Other Names:', e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 641,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 639,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                children: \"Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 647,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                value: editedManuscript.metadata['Date:'],\n                onChange: e => handleInputChange('Date:', e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 648,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 646,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                children: \"Place of Origin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 654,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                value: editedManuscript.metadata['Origin:'],\n                onChange: e => handleInputChange('Origin:', e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 655,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 653,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                children: \"Materials\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 661,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                value: editedManuscript.metadata['Materials:'],\n                onChange: e => handleInputChange('Materials:', e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 662,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 660,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                children: \"Format Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 668,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n                value: editedManuscript.metadata['Format Description:'],\n                onChange: e => handleInputChange('Format Description:', e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 669,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 667,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              width: \"100%\",\n              mt: 4,\n              children: [/*#__PURE__*/_jsxDEV(Flex, {\n                justify: \"space-between\",\n                align: \"center\",\n                mb: 4,\n                children: [/*#__PURE__*/_jsxDEV(Heading, {\n                  size: \"md\",\n                  children: \"Verses\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 678,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"sm\",\n                  colorScheme: \"blue\",\n                  onClick: handleAddVerse,\n                  children: \"Add Verse\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 679,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 677,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(VStack, {\n                spacing: 2,\n                align: \"stretch\",\n                position: \"relative\",\n                children: editedManuscript.verses.map((verse, index) => /*#__PURE__*/_jsxDEV(Box, {\n                  p: 4,\n                  borderWidth: \"1px\",\n                  borderRadius: \"md\",\n                  bg: \"white\",\n                  draggable: editingVerseIndex !== index,\n                  onDragStart: e => handleDragStart(e, index),\n                  onDragEnd: e => handleDragEnd(e),\n                  onDragOver: e => handleDragOver(e, index),\n                  onDrop: e => handleDrop(e, index),\n                  cursor: editingVerseIndex === index ? 'default' : 'grab',\n                  transition: \"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)\",\n                  _hover: {\n                    bg: \"gray.50\"\n                  },\n                  style: getVerseStyle(index),\n                  children: /*#__PURE__*/_jsxDEV(Flex, {\n                    justify: \"space-between\",\n                    align: \"center\",\n                    children: /*#__PURE__*/_jsxDEV(Flex, {\n                      align: \"center\",\n                      flex: 1,\n                      children: [/*#__PURE__*/_jsxDEV(Box, {\n                        mr: 3,\n                        cursor: editingVerseIndex === index ? 'default' : 'grab',\n                        _active: {\n                          cursor: 'grabbing'\n                        },\n                        children: /*#__PURE__*/_jsxDEV(DragHandleIcon, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 708,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 703,\n                        columnNumber: 29\n                      }, this), editingVerseIndex === index ? /*#__PURE__*/_jsxDEV(Flex, {\n                        flex: 1,\n                        align: \"center\",\n                        children: [/*#__PURE__*/_jsxDEV(Textarea, {\n                          value: editingVerseText,\n                          onChange: e => setEditingVerseText(e.target.value),\n                          size: \"sm\",\n                          resize: \"vertical\",\n                          mr: 2,\n                          autoFocus: true,\n                          onKeyDown: e => {\n                            if (e.key === 'Enter' && !e.shiftKey) {\n                              e.preventDefault();\n                              saveVerseEdit();\n                            } else if (e.key === 'Escape') {\n                              cancelEditingVerse();\n                            }\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 712,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                          \"aria-label\": \"Save verse\",\n                          icon: /*#__PURE__*/_jsxDEV(CheckIcon, {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 730,\n                            columnNumber: 41\n                          }, this),\n                          size: \"sm\",\n                          colorScheme: \"green\",\n                          mr: 1,\n                          onClick: saveVerseEdit\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 728,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                          \"aria-label\": \"Cancel editing\",\n                          icon: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 738,\n                            columnNumber: 41\n                          }, this),\n                          size: \"sm\",\n                          onClick: cancelEditingVerse\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 736,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 711,\n                        columnNumber: 31\n                      }, this) : /*#__PURE__*/_jsxDEV(Flex, {\n                        flex: 1,\n                        align: \"center\",\n                        children: [/*#__PURE__*/_jsxDEV(Text, {\n                          fontWeight: \"bold\",\n                          mr: 4,\n                          flexShrink: 0,\n                          children: [\"Verse \", verse.verse_number]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 745,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(Text, {\n                          flex: 1,\n                          whiteSpace: \"pre-wrap\",\n                          wordBreak: \"break-word\",\n                          children: verse.verse_text\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 748,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(Box, {\n                          flexShrink: 0,\n                          children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                            \"aria-label\": \"Edit verse\",\n                            icon: /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 752,\n                              columnNumber: 43\n                            }, this),\n                            size: \"sm\",\n                            variant: \"ghost\",\n                            mr: 2,\n                            onClick: () => startEditingVerse(index)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 750,\n                            columnNumber: 35\n                          }, this), /*#__PURE__*/_jsxDEV(Button, {\n                            size: \"sm\",\n                            colorScheme: \"red\",\n                            variant: \"ghost\",\n                            onClick: e => handleRemoveVerse(e, index),\n                            children: \"Remove\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 758,\n                            columnNumber: 35\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 749,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 744,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 702,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 701,\n                    columnNumber: 25\n                  }, this)\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 685,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 683,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 676,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              colorScheme: \"blue\",\n              onClick: handleSave,\n              isLoading: isSaving,\n              width: \"100%\",\n              mt: 4,\n              children: \"Save Changes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 776,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              colorScheme: \"red\",\n              onClick: onDeleteOpen,\n              width: \"100%\",\n              mt: 2,\n              children: \"Delete Manuscript\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 786,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 631,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 629,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 624,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: isDeleteOpen,\n      onClose: onDeleteClose,\n      children: [/*#__PURE__*/_jsxDEV(ModalOverlay, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 802,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ModalContent, {\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          children: \"Delete Manuscript\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 804,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalCloseButton, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 805,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n          pb: 6,\n          children: [/*#__PURE__*/_jsxDEV(Text, {\n            children: \"Are you sure you want to delete this manuscript? This action cannot be undone.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 807,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Text, {\n            mt: 2,\n            fontWeight: \"bold\",\n            children: [\"Manuscript: \", manuscript === null || manuscript === void 0 ? void 0 : manuscript.filename.replace('.docx', '')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 808,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Flex, {\n            mt: 4,\n            gap: 3,\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              colorScheme: \"red\",\n              onClick: handleDelete,\n              isLoading: isDeleting,\n              flex: 1,\n              children: \"Yes, Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 811,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: onDeleteClose,\n              flex: 1,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 819,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 810,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 806,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 803,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 801,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 441,\n    columnNumber: 5\n  }, this);\n}\n_s(ManuscriptViewer, \"QL60fplrbUn4kgONNUer2pvMHLc=\", false, function () {\n  return [useNavigate, useParams, useDisplaySettings, useDisclosure, useDisclosure, useDisclosure, useToast];\n});\n_c = ManuscriptViewer;\nexport default ManuscriptViewer;\nvar _c;\n$RefreshReg$(_c, \"ManuscriptViewer\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Box","Flex","Heading","Text","Image","VStack","Spinner","useToast","Button","useDisclosure","Modal","ModalOverlay","ModalContent","ModalHeader","ModalBody","ModalCloseButton","Input","FormControl","FormLabel","Textarea","IconButton","NavigationBar","useNavigate","useParams","useDisplaySettings","DragHandleIcon","EditIcon","CheckIcon","CloseIcon","jsxDEV","_jsxDEV","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","ManuscriptViewer","_s","navigate","sigla","settings","manuscript","setManuscript","isLoading","setIsLoading","error","setError","selectedImage","setSelectedImage","isUploading","setIsUploading","isDeleting","setIsDeleting","fileInputRef","isOpen","onOpen","onClose","isEditOpen","onEditOpen","onEditClose","isDeleteOpen","onDeleteOpen","onDeleteClose","editedManuscript","setEditedManuscript","isSaving","setIsSaving","toast","draggedIndex","setDraggedIndex","editingVerseIndex","setEditingVerseIndex","editingVerseText","setEditingVerseText","isDragging","setIsDragging","dragOverIndex","setDragOverIndex","verseHeight","mousePosition","setMousePosition","x","y","dragRef","boxBg","theme","textColor","borderColor","linkColor","fetchManuscript","response","fetch","ok","Error","data","json","transformedData","verses","map","verse","Array","isArray","verse_number","parseInt","verse_text","console","message","handleImageClick","current","click","handleImageChange","e","_e$target$files","file","target","files","reader","FileReader","onload","_e$target","result","readAsDataURL","handleImageUpload","formData","FormData","blob","append","JSON","stringify","image_filename","uploadResponse","filename","method","body","updatedManuscript","title","status","duration","isClosable","description","handleEditClick","handleInputChange","field","value","metadata","handleDragStart","index","currentTarget","style","opacity","dataTransfer","effectAllowed","handleDragEnd","preventDefault","handleDragOver","handleDrop","dropIndex","movedVerse","splice","updatedVerses","getVerseStyle","borderTop","marginTop","backgroundColor","handleAddVerse","verseText","prompt","trim","lastVerseNumber","length","handleRemoveVerse","stopPropagation","filter","_","i","handleSave","headers","errorData","startEditingVerse","cancelEditingVerse","saveVerseEdit","handleDelete","children","fileName","_jsxFileName","lineNumber","columnNumber","justify","align","height","size","p","color","bg","py","px","fontWeight","ml","colorScheme","onClick","gap","flex","maxW","mb","fontSize","w","replace","spacing","mt","border","borderRadius","overflowY","display","as","cursor","_hover","textDecoration","state","verseNumber","justifyContent","src","alt","maxH","objectFit","width","alignItems","pb","type","ref","onChange","accept","position","overflow","mr","isDisabled","borderWidth","draggable","onDragStart","onDragEnd","onDragOver","onDrop","transition","_active","resize","autoFocus","onKeyDown","key","shiftKey","icon","flexShrink","whiteSpace","wordBreak","variant","_c","$RefreshReg$"],"sources":["/Users/brycemolnar/Documents/bbbbbb/CS-410-Senior-Project-Editing-Tool/frontend/src/pages/ManuscriptViewer.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo } from 'react';\nimport { \n  Box, \n  Flex, \n  Heading, \n  Text, \n  Image, \n  VStack, \n  Spinner, \n  useToast,\n  Button,\n  useDisclosure,\n  Modal,\n  ModalOverlay,\n  ModalContent,\n  ModalHeader,\n  ModalBody,\n  ModalCloseButton,\n  Input,\n  FormControl,\n  FormLabel,\n  Textarea,\n  IconButton,\n} from '@chakra-ui/react';\nimport NavigationBar from '../components/NavigationBar.tsx';\nimport { useNavigate, useLocation, useParams } from 'react-router-dom';\nimport { useDisplaySettings } from '../contexts/DisplaySettingsContext.tsx';\nimport { DragHandleIcon, EditIcon, CheckIcon, CloseIcon } from '@chakra-ui/icons';\n\n// API base URL - can be configured based on environment\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:8000';\n\ninterface Manuscript {\n  _id: string;\n  filename: string;\n  metadata: {\n    'MS ID:': string;\n    'Other Names:': string;\n    'Contents:': string;\n    'Date:': string;\n    'Origin:': string;\n    'Total Folia:': string;\n    'Dimensions:': string;\n    'Materials:': string;\n    'Laod Folia:': string;\n    'Format Description:': string;\n  };\n  verses: {\n    verse_number: number;\n    verse_text: string;\n  }[];\n  image_filename?: string;\n}\n\nfunction ManuscriptViewer() {\n  const navigate = useNavigate();\n  const { sigla } = useParams();\n  const { settings } = useDisplaySettings();\n  const [manuscript, setManuscript] = useState<Manuscript | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedImage, setSelectedImage] = useState<string | null>(null);\n  const [isUploading, setIsUploading] = useState(false);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const { isOpen, onOpen, onClose } = useDisclosure();\n  const { isOpen: isEditOpen, onOpen: onEditOpen, onClose: onEditClose } = useDisclosure();\n  const { isOpen: isDeleteOpen, onOpen: onDeleteOpen, onClose: onDeleteClose } = useDisclosure();\n  const [editedManuscript, setEditedManuscript] = useState<Manuscript | null>(null);\n  const [isSaving, setIsSaving] = useState(false);\n  const toast = useToast();\n  const [draggedIndex, setDraggedIndex] = useState<number | null>(null);\n  const [editingVerseIndex, setEditingVerseIndex] = useState<number | null>(null);\n  const [editingVerseText, setEditingVerseText] = useState('');\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragOverIndex, setDragOverIndex] = useState<number | null>(null);\n  const verseHeight = useRef<number>(0);\n  const [mousePosition, setMousePosition] = useState<{ x: number; y: number }>({ x: 0, y: 0 });\n  const dragRef = useRef<{ x: number; y: number }>({ x: 0, y: 0 });\n\n  // Theme-based colors\n  const boxBg = settings.theme === 'dark' ? 'gray.800' : 'white';\n  const textColor = settings.theme === 'dark' ? 'gray.100' : 'gray.900';\n  const borderColor = settings.theme === 'dark' ? 'gray.600' : 'gray.300';\n  const linkColor = settings.theme === 'dark' ? 'blue.300' : 'blue.600';\n\n  useEffect(() => {\n    async function fetchManuscript() {\n      try {\n        setIsLoading(true);\n        setError(null);\n        const response = await fetch(`${API_BASE_URL}/api/documents/${sigla}.docx`);\n        if (!response.ok) {\n          throw new Error('Failed to fetch manuscript');\n        }\n        const data = await response.json();\n\n        // Transform verses to ensure consistent format\n        const transformedData = {\n          ...data,\n          verses: data.verses.map((verse: any) => {\n            // If verse is a tuple [number, text]\n            if (Array.isArray(verse)) {\n              return {\n                verse_number: parseInt(verse[0]),\n                verse_text: verse[1]\n              };\n            }\n            // If verse is already an object {verse_number, verse_text}\n            return verse;\n          })\n        };\n\n        setManuscript(transformedData);\n        setEditedManuscript(transformedData);\n      } catch (error) {\n        console.error('Error fetching manuscript:', error);\n        setError(error instanceof Error ? error.message : 'Failed to fetch manuscript');\n      } finally {\n        setIsLoading(false);\n      }\n    }\n\n    if (sigla) {\n      fetchManuscript();\n    }\n  }, [sigla]);\n\n  function handleImageClick() {\n    if (fileInputRef.current) {\n      fileInputRef.current.click();\n    }\n  }\n\n  function handleImageChange(e: React.ChangeEvent<HTMLInputElement>) {\n    const file = e.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = function(e) {\n        setSelectedImage(e.target?.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  }\n\n  async function handleImageUpload() {\n    if (!selectedImage || !manuscript) return;\n\n    try {\n      setIsUploading(true);\n      const formData = new FormData();\n      \n      // Convert base64 to blob\n      const response = await fetch(selectedImage);\n      const blob = await response.blob();\n      formData.append('image', blob, 'manuscript_image.jpg');\n\n      // Add the manuscript data\n      formData.append('document', JSON.stringify({\n        ...manuscript,\n        image_filename: 'manuscript_image.jpg'\n      }));\n\n      const uploadResponse = await fetch(`${API_BASE_URL}/api/documents/${manuscript.filename}/update`, {\n        method: 'PUT',\n        body: formData\n      });\n\n      if (!uploadResponse.ok) {\n        throw new Error('Failed to upload image');\n      }\n\n      const updatedManuscript = await uploadResponse.json();\n      setManuscript(updatedManuscript);\n      onClose();\n\n      toast({\n        title: 'Image uploaded successfully',\n        status: 'success',\n        duration: 3000,\n        isClosable: true,\n      });\n    } catch (error) {\n      toast({\n        title: 'Error uploading image',\n        description: error instanceof Error ? error.message : 'An error occurred',\n        status: 'error',\n        duration: 5000,\n        isClosable: true,\n      });\n    } finally {\n      setIsUploading(false);\n    }\n  }\n\n  const handleEditClick = () => {\n    if (manuscript) {\n      setEditedManuscript({...manuscript});\n      onEditOpen();\n    }\n  };\n\n  const handleInputChange = (field: string, value: string) => {\n    if (editedManuscript) {\n      setEditedManuscript({\n        ...editedManuscript,\n        metadata: {\n          ...editedManuscript.metadata,\n          [field]: value\n        }\n      });\n    }\n  };\n\n  const handleDragStart = (e: React.DragEvent<HTMLDivElement>, index: number) => {\n    setDraggedIndex(index);\n    (e.currentTarget as HTMLDivElement).style.opacity = '0.4';\n    e.dataTransfer.effectAllowed = 'move';\n  };\n\n  const handleDragEnd = (e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    (e.currentTarget as HTMLDivElement).style.opacity = '1';\n    setDraggedIndex(null);\n    setDragOverIndex(null);\n  };\n\n  const handleDragOver = (e: React.DragEvent, index: number) => {\n    e.preventDefault();\n    if (draggedIndex === null || draggedIndex === index) return;\n    setDragOverIndex(index);\n  };\n\n  const handleDrop = (e: React.DragEvent, dropIndex: number) => {\n    e.preventDefault();\n    if (draggedIndex === null || !editedManuscript || draggedIndex === dropIndex) return;\n\n    const verses = [...editedManuscript.verses];\n    const [movedVerse] = verses.splice(draggedIndex, 1);\n    verses.splice(dropIndex, 0, movedVerse);\n\n    // Update verse numbers\n    const updatedVerses = verses.map((verse, index) => ({\n      ...verse,\n      verse_number: index + 1\n    }));\n\n    setEditedManuscript({\n      ...editedManuscript,\n      verses: updatedVerses\n    });\n\n    setDraggedIndex(null);\n    setDragOverIndex(null);\n  };\n\n  const getVerseStyle = (index: number) => {\n    if (index === draggedIndex) {\n      return { opacity: 0.4 };\n    }\n\n    if (index === dragOverIndex) {\n      return { \n        borderTop: '2px solid #4299E1',\n        marginTop: '-1px',\n        backgroundColor: '#EBF8FF'\n      };\n    }\n\n    return {};\n  };\n\n  const handleAddVerse = () => {\n    if (editedManuscript) {\n      const verseText = prompt('Enter the verse text:');\n      if (verseText?.trim()) {\n        const lastVerseNumber = editedManuscript.verses.length > 0 \n          ? editedManuscript.verses[editedManuscript.verses.length - 1].verse_number \n          : 0;\n\n        setEditedManuscript({\n          ...editedManuscript,\n          verses: [\n            ...editedManuscript.verses,\n            { \n              verse_number: lastVerseNumber + 1,\n              verse_text: verseText.trim()\n            }\n          ]\n        });\n      }\n    }\n  };\n\n  const handleRemoveVerse = (e: React.MouseEvent, index: number) => {\n    e.stopPropagation(); // Prevent event bubbling\n    if (editedManuscript) {\n      const updatedVerses = editedManuscript.verses\n        .filter((_, i) => i !== index)\n        .map((verse, i) => ({\n          ...verse,\n          verse_number: i + 1\n        }));\n\n      setEditedManuscript({\n        ...editedManuscript,\n        verses: updatedVerses\n      });\n    }\n  };\n\n  const handleSave = async () => {\n    if (!editedManuscript) return;\n\n    try {\n      setIsSaving(true);\n      const response = await fetch(`${API_BASE_URL}/api/documents/${editedManuscript.filename}/update-manuscript`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(editedManuscript)\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to update manuscript');\n      }\n\n      const updatedManuscript = await response.json();\n      setManuscript(updatedManuscript);\n      onEditClose();\n      \n      toast({\n        title: 'Manuscript updated successfully',\n        status: 'success',\n        duration: 3000,\n        isClosable: true,\n      });\n    } catch (error) {\n      toast({\n        title: 'Error updating manuscript',\n        description: error instanceof Error ? error.message : 'An error occurred',\n        status: 'error',\n        duration: 5000,\n        isClosable: true,\n      });\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const startEditingVerse = (index: number) => {\n    setEditingVerseIndex(index);\n    setEditingVerseText(editedManuscript?.verses[index].verse_text || '');\n  };\n\n  const cancelEditingVerse = () => {\n    setEditingVerseIndex(null);\n    setEditingVerseText('');\n  };\n\n  const saveVerseEdit = () => {\n    if (editedManuscript && editingVerseIndex !== null) {\n      const updatedVerses = [...editedManuscript.verses];\n      updatedVerses[editingVerseIndex] = {\n        ...updatedVerses[editingVerseIndex],\n        verse_text: editingVerseText.trim()\n      };\n\n      setEditedManuscript({\n        ...editedManuscript,\n        verses: updatedVerses\n      });\n\n      setEditingVerseIndex(null);\n      setEditingVerseText('');\n    }\n  };\n\n  const handleDelete = async () => {\n    if (!manuscript) return;\n\n    try {\n      setIsDeleting(true);\n      const response = await fetch(`${API_BASE_URL}/api/documents/${manuscript.filename}/delete`, {\n        method: 'DELETE',\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to delete manuscript');\n      }\n\n      toast({\n        title: 'Manuscript deleted successfully',\n        status: 'success',\n        duration: 3000,\n        isClosable: true,\n      });\n\n      // Navigate back to the search page\n      navigate('/search-database');\n    } catch (error) {\n      toast({\n        title: 'Error deleting manuscript',\n        description: error instanceof Error ? error.message : 'An error occurred',\n        status: 'error',\n        duration: 5000,\n        isClosable: true,\n      });\n    } finally {\n      setIsDeleting(false);\n      onDeleteClose();\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <Box>\n        <NavigationBar />\n        <Flex justify=\"center\" align=\"center\" height=\"calc(100vh - 100px)\">\n          <Spinner size=\"xl\" />\n        </Flex>\n      </Box>\n    );\n  }\n\n  if (error || !manuscript) {\n    return (\n      <Box>\n        <NavigationBar />\n        <Box p={8}>\n          <Text color=\"red.500\">{error || 'Manuscript not found'}</Text>\n        </Box>\n      </Box>\n    );\n  }\n\n  return (\n    <Box>\n      <NavigationBar />\n      <Box>\n        <Box bg=\"#08004F\" py={8} px={6}>\n          <Flex justify=\"space-between\" align=\"center\">\n            <Heading fontWeight=\"normal\" ml={8} color=\"lightgray\" size=\"lg\">Manuscript View</Heading>\n            <Button colorScheme=\"blue\" onClick={handleEditClick}>Edit Manuscript</Button>\n          </Flex>\n        </Box>\n\n        <Box ml={8} p={6}>\n          <Flex gap={12}>\n            <Box flex={2} maxW=\"65%\">\n              <Flex mb={6}>\n                <Text fontSize=\"lg\" fontWeight=\"normal\" w=\"180px\" color={textColor}>MS ID:</Text>\n                <Text fontSize=\"lg\" fontWeight=\"normal\" flex={1} color={textColor}><u>{manuscript.metadata['MS ID:']}</u></Text>\n                <Text fontSize=\"lg\" fontWeight=\"normal\" ml={8} color={textColor}>Sigla: <u>{manuscript.filename.replace('.docx', '')}</u></Text>\n              </Flex>\n              \n              <VStack spacing={4} align=\"stretch\">\n                <Flex>\n                  <Text fontSize=\"lg\" fontWeight=\"normal\" w=\"180px\" color={textColor}>Other Names:</Text>\n                  <Text fontSize=\"lg\" fontWeight=\"normal\" color={textColor}><u>{manuscript.metadata['Other Names:']}</u></Text>\n                </Flex>\n                <Flex>\n                  <Text fontSize=\"lg\" fontWeight=\"normal\" w=\"180px\" color={textColor}>Total Folia:</Text>\n                  <Text fontSize=\"lg\" fontWeight=\"normal\" color={textColor}><u>{manuscript.metadata['Total Folia:']}</u></Text>\n                </Flex>\n                <Flex>\n                  <Text fontSize=\"lg\" fontWeight=\"normal\" w=\"180px\" color={textColor}>Laod. Folia:</Text>\n                  <Text fontSize=\"lg\" fontWeight=\"normal\" color={textColor}><u>{manuscript.metadata['Laod Folia:']}</u></Text>\n                </Flex>\n                <Flex>\n                  <Text fontSize=\"lg\" fontWeight=\"normal\" w=\"180px\" color={textColor}>Dimensions:</Text>\n                  <Text fontSize=\"lg\" fontWeight=\"normal\" color={textColor}><u>{manuscript.metadata['Dimensions:']}</u></Text>\n                </Flex>\n                <Flex>\n                  <Text fontSize=\"lg\" fontWeight=\"normal\" w=\"180px\" color={textColor}>Place of Origin:</Text>\n                  <Text fontSize=\"lg\" fontWeight=\"normal\" color={textColor}><u>{manuscript.metadata['Origin:']}</u></Text>\n                </Flex>\n                <Flex>\n                  <Text fontSize=\"lg\" fontWeight=\"normal\" w=\"180px\" color={textColor}>Materials:</Text>\n                  <Text fontSize=\"lg\" fontWeight=\"normal\" color={textColor}><u>{manuscript.metadata['Materials:']}</u></Text>\n                </Flex>\n              </VStack>\n\n              <Flex mt={4} mb={4}>\n                <Text fontSize=\"lg\" fontWeight=\"normal\" w=\"180px\" color={textColor}>Format Description:</Text>\n                <Text fontSize=\"lg\" fontWeight=\"normal\" flex={1} color={textColor}><u>{manuscript.metadata['Format Description:']}</u></Text>\n                <Text fontSize=\"lg\" fontWeight=\"normal\" ml={8} color={textColor}>Date: <u>{manuscript.metadata['Date:']}</u></Text>\n              </Flex>\n\n              <Box \n                border=\"1px solid\" \n                borderColor={borderColor}\n                borderRadius=\"md\"\n                p={4}\n                height=\"500px\"\n                overflowY=\"auto\"\n                bg={boxBg}\n              >\n                <VStack spacing={2} align=\"stretch\">\n                  {manuscript.verses.map((verse, index) => (\n                    <Box key={`${verse.verse_number}-${index}`}>\n                      <Text color={textColor} display=\"inline\">\n                        <Text\n                          as=\"span\" \n                          cursor=\"pointer\"\n                          color={linkColor}\n                          _hover={{ textDecoration: 'underline' }}\n                          onClick={() => {\n                            navigate(`/verse/${verse.verse_number}`, {\n                              state: { \n                                verseNumber: verse.verse_number,\n                                verseText: verse.verse_text\n                              }\n                            });\n                          }}\n                        >\n                          <sup>{verse.verse_number}</sup>\n                        </Text>\n                        {' '}{verse.verse_text}\n                      </Text>\n                    </Box>\n                  ))}\n                </VStack>\n              </Box>\n            </Box>\n\n            <Box flex={1} display=\"flex\" justifyContent=\"flex-start\">\n              {manuscript.image_filename ? (\n                <Image \n                  src={`${API_BASE_URL}/media/${manuscript.image_filename}`}\n                  alt={`${manuscript.metadata['Other Names:']} manuscript page`}\n                  maxH=\"900px\"\n                  objectFit=\"contain\"\n                />\n              ) : (\n                <Box \n                  border=\"2px dashed\" \n                  borderColor=\"gray.400\" \n                  borderRadius=\"md\"\n                  height=\"300px\"\n                  width=\"100%\"\n                  display=\"flex\"\n                  alignItems=\"center\"\n                  justifyContent=\"center\"\n                  bg=\"gray.100\"\n                  cursor=\"pointer\"\n                  _hover={{ bg: \"gray.200\" }}\n                  onClick={onOpen}\n                >\n                  <VStack spacing={2}>\n                    <Text color=\"gray.500\" fontSize=\"lg\">No image available</Text>\n                    <Text color=\"gray.400\" fontSize=\"sm\">Click to upload an image</Text>\n                  </VStack>\n                </Box>\n              )}\n            </Box>\n          </Flex>\n        </Box>\n      </Box>\n\n      {/* Image Upload Modal */}\n      <Modal isOpen={isOpen} onClose={onClose}>\n        <ModalOverlay />\n        <ModalContent>\n          <ModalHeader>Upload Manuscript Image</ModalHeader>\n          <ModalCloseButton />\n          <ModalBody pb={6}>\n            <input\n              type=\"file\"\n              ref={fileInputRef}\n              onChange={handleImageChange}\n              accept=\"image/*\"\n              style={{ display: 'none' }}\n            />\n            <Box \n              border=\"2px dashed\" \n              borderColor=\"gray.400\" \n              borderRadius=\"md\"\n              height=\"300px\"\n              display=\"flex\"\n              alignItems=\"center\"\n              justifyContent=\"center\"\n              bg=\"gray.100\"\n              cursor=\"pointer\"\n              _hover={{ bg: \"gray.200\" }}\n              onClick={handleImageClick}\n              position=\"relative\"\n              overflow=\"hidden\"\n              mb={4}\n            >\n              {selectedImage ? (\n                <Image\n                  src={selectedImage}\n                  alt=\"Selected manuscript\"\n                  objectFit=\"contain\"\n                  maxH=\"100%\"\n                  maxW=\"100%\"\n                />\n              ) : (\n                <VStack spacing={2}>\n                  <Text color=\"gray.500\" fontSize=\"lg\">Upload image</Text>\n                  <Text color=\"gray.400\" fontSize=\"sm\">Click to select a file</Text>\n                </VStack>\n              )}\n            </Box>\n            <Button\n              colorScheme=\"blue\"\n              mr={3}\n              onClick={handleImageUpload}\n              isLoading={isUploading}\n              width=\"100%\"\n              isDisabled={!selectedImage}\n            >\n              Upload Image\n            </Button>\n          </ModalBody>\n        </ModalContent>\n      </Modal>\n\n      {/* Edit Modal */}\n      <Modal isOpen={isEditOpen} onClose={onEditClose} size=\"xl\">\n        <ModalOverlay />\n        <ModalContent maxW=\"800px\">\n          <ModalHeader>Edit Manuscript Details</ModalHeader>\n          <ModalCloseButton />\n          <ModalBody pb={6}>\n            {editedManuscript && (\n              <VStack spacing={4}>\n                <FormControl>\n                  <FormLabel>MS ID</FormLabel>\n                  <Input\n                    value={editedManuscript.metadata['MS ID:']}\n                    onChange={(e) => handleInputChange('MS ID:', e.target.value)}\n                  />\n                </FormControl>\n                <FormControl>\n                  <FormLabel>Other Names</FormLabel>\n                  <Input\n                    value={editedManuscript.metadata['Other Names:']}\n                    onChange={(e) => handleInputChange('Other Names:', e.target.value)}\n                  />\n                </FormControl>\n                <FormControl>\n                  <FormLabel>Date</FormLabel>\n                  <Input\n                    value={editedManuscript.metadata['Date:']}\n                    onChange={(e) => handleInputChange('Date:', e.target.value)}\n                  />\n                </FormControl>\n                <FormControl>\n                  <FormLabel>Place of Origin</FormLabel>\n                  <Input\n                    value={editedManuscript.metadata['Origin:']}\n                    onChange={(e) => handleInputChange('Origin:', e.target.value)}\n                  />\n                </FormControl>\n                <FormControl>\n                  <FormLabel>Materials</FormLabel>\n                  <Input\n                    value={editedManuscript.metadata['Materials:']}\n                    onChange={(e) => handleInputChange('Materials:', e.target.value)}\n                  />\n                </FormControl>\n                <FormControl>\n                  <FormLabel>Format Description</FormLabel>\n                  <Textarea\n                    value={editedManuscript.metadata['Format Description:']}\n                    onChange={(e) => handleInputChange('Format Description:', e.target.value)}\n                  />\n                </FormControl>\n\n                {/* Verses Section */}\n                <Box width=\"100%\" mt={4}>\n                  <Flex justify=\"space-between\" align=\"center\" mb={4}>\n                    <Heading size=\"md\">Verses</Heading>\n                    <Button size=\"sm\" colorScheme=\"blue\" onClick={handleAddVerse}>\n                      Add Verse\n                    </Button>\n                  </Flex>\n                  <VStack spacing={2} align=\"stretch\" position=\"relative\">\n                    {editedManuscript.verses.map((verse, index) => (\n                      <Box\n                        key={index}\n                        p={4}\n                        borderWidth=\"1px\"\n                        borderRadius=\"md\"\n                        bg=\"white\"\n                        draggable={editingVerseIndex !== index}\n                        onDragStart={(e) => handleDragStart(e, index)}\n                        onDragEnd={(e) => handleDragEnd(e)}\n                        onDragOver={(e) => handleDragOver(e, index)}\n                        onDrop={(e) => handleDrop(e, index)}\n                        cursor={editingVerseIndex === index ? 'default' : 'grab'}\n                        transition=\"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)\"\n                        _hover={{ bg: \"gray.50\" }}\n                        style={getVerseStyle(index)}\n                      >\n                        <Flex justify=\"space-between\" align=\"center\">\n                          <Flex align=\"center\" flex={1}>\n                            <Box \n                              mr={3}\n                              cursor={editingVerseIndex === index ? 'default' : 'grab'}\n                              _active={{ cursor: 'grabbing' }}\n                            >\n                              <DragHandleIcon />\n                            </Box>\n                            {editingVerseIndex === index ? (\n                              <Flex flex={1} align=\"center\">\n                                <Textarea\n                                  value={editingVerseText}\n                                  onChange={(e) => setEditingVerseText(e.target.value)}\n                                  size=\"sm\"\n                                  resize=\"vertical\"\n                                  mr={2}\n                                  autoFocus\n                                  onKeyDown={(e) => {\n                                    if (e.key === 'Enter' && !e.shiftKey) {\n                                      e.preventDefault();\n                                      saveVerseEdit();\n                                    } else if (e.key === 'Escape') {\n                                      cancelEditingVerse();\n                                    }\n                                  }}\n                                />\n                                <IconButton\n                                  aria-label=\"Save verse\"\n                                  icon={<CheckIcon />}\n                                  size=\"sm\"\n                                  colorScheme=\"green\"\n                                  mr={1}\n                                  onClick={saveVerseEdit}\n                                />\n                                <IconButton\n                                  aria-label=\"Cancel editing\"\n                                  icon={<CloseIcon />}\n                                  size=\"sm\"\n                                  onClick={cancelEditingVerse}\n                                />\n                              </Flex>\n                            ) : (\n                              <Flex flex={1} align=\"center\">\n                                <Text fontWeight=\"bold\" mr={4} flexShrink={0}>\n                                  Verse {verse.verse_number}\n                                </Text>\n                                <Text flex={1} whiteSpace=\"pre-wrap\" wordBreak=\"break-word\">{verse.verse_text}</Text>\n                                <Box flexShrink={0}>\n                                  <IconButton\n                                    aria-label=\"Edit verse\"\n                                    icon={<EditIcon />}\n                                    size=\"sm\"\n                                    variant=\"ghost\"\n                                    mr={2}\n                                    onClick={() => startEditingVerse(index)}\n                                  />\n                                  <Button\n                                    size=\"sm\"\n                                    colorScheme=\"red\"\n                                    variant=\"ghost\"\n                                    onClick={(e) => handleRemoveVerse(e, index)}\n                                  >\n                                    Remove\n                                  </Button>\n                                </Box>\n                              </Flex>\n                            )}\n                          </Flex>\n                        </Flex>\n                      </Box>\n                    ))}\n                  </VStack>\n                </Box>\n\n                <Button\n                  colorScheme=\"blue\"\n                  onClick={handleSave}\n                  isLoading={isSaving}\n                  width=\"100%\"\n                  mt={4}\n                >\n                  Save Changes\n                </Button>\n\n                <Button\n                  colorScheme=\"red\"\n                  onClick={onDeleteOpen}\n                  width=\"100%\"\n                  mt={2}\n                >\n                  Delete Manuscript\n                </Button>\n              </VStack>\n            )}\n          </ModalBody>\n        </ModalContent>\n      </Modal>\n\n      {/* Delete Confirmation Modal */}\n      <Modal isOpen={isDeleteOpen} onClose={onDeleteClose}>\n        <ModalOverlay />\n        <ModalContent>\n          <ModalHeader>Delete Manuscript</ModalHeader>\n          <ModalCloseButton />\n          <ModalBody pb={6}>\n            <Text>Are you sure you want to delete this manuscript? This action cannot be undone.</Text>\n            <Text mt={2} fontWeight=\"bold\">Manuscript: {manuscript?.filename.replace('.docx', '')}</Text>\n            \n            <Flex mt={4} gap={3}>\n              <Button\n                colorScheme=\"red\"\n                onClick={handleDelete}\n                isLoading={isDeleting}\n                flex={1}\n              >\n                Yes, Delete\n              </Button>\n              <Button onClick={onDeleteClose} flex={1}>Cancel</Button>\n            </Flex>\n          </ModalBody>\n        </ModalContent>\n      </Modal>\n    </Box>\n  );\n}\n\nexport default ManuscriptViewer; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}