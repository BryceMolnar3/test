{"ast":null,"code":"var _jsxFileName = \"/Users/brycemolnar/Documents/bbbbbb/CS-410-Senior-Project-Editing-Tool/frontend/src/pages/verse/VerseId.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Box, Flex, Heading, Text, Spinner } from '@chakra-ui/react';\nimport { useLocation, useNavigate, useParams } from 'react-router-dom';\nimport NavigationBar from '../../components/NavigationBar.tsx';\nimport { useDisplaySettings } from '../../contexts/DisplaySettingsContext.tsx';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// API base URL - can be configured based on environment\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:8000';\nfunction VerseId() {\n  _s();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const {\n    verseNumber: verseNumberParam\n  } = useParams();\n  const {\n    settings\n  } = useDisplaySettings();\n  const locationState = location.state;\n  const [manuscripts, setManuscripts] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Get verse number from either URL param or location state\n  const verseNumber = verseNumberParam ? parseInt(verseNumberParam) : locationState === null || locationState === void 0 ? void 0 : locationState.verseNumber;\n\n  // Theme-based colors\n  const textColor = settings.theme === 'dark' ? 'gray.100' : 'gray.900';\n  const linkColor = settings.theme === 'dark' ? 'blue.300' : 'blue.600';\n  useEffect(() => {\n    async function fetchManuscripts() {\n      try {\n        setIsLoading(true);\n        const response = await fetch(`${API_BASE_URL}/api/documents/`);\n        if (!response.ok) {\n          throw new Error('Failed to fetch manuscripts');\n        }\n        const data = await response.json();\n\n        // Transform manuscripts to ensure consistent verse format\n        const transformedData = data.map(manuscript => ({\n          ...manuscript,\n          verses: manuscript.verses.map(verse => {\n            // If verse is a tuple [number, text]\n            if (Array.isArray(verse)) {\n              return {\n                verse_number: parseInt(verse[0]),\n                verse_text: verse[1]\n              };\n            }\n            // If verse is already an object {verse_number, verse_text}\n            return verse;\n          })\n        }));\n        setManuscripts(transformedData);\n      } catch (error) {\n        console.error('Error fetching manuscripts:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    }\n    fetchManuscripts();\n  }, []);\n  if (!verseNumber) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      children: \"No verse number provided\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 12\n    }, this);\n  }\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      children: [/*#__PURE__*/_jsxDEV(NavigationBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        justify: \"center\",\n        align: \"center\",\n        height: \"calc(100vh - 100px)\",\n        children: /*#__PURE__*/_jsxDEV(Spinner, {\n          size: \"xl\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(NavigationBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      bg: \"#08004F\",\n      py: 8,\n      px: 6,\n      children: /*#__PURE__*/_jsxDEV(Heading, {\n        fontWeight: \"normal\",\n        ml: 8,\n        color: \"lightgray\",\n        size: \"lg\",\n        children: \"Verse View\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      p: 6,\n      ml: 8,\n      children: [/*#__PURE__*/_jsxDEV(Heading, {\n        size: \"lg\",\n        mb: 4,\n        color: textColor,\n        children: [\"Verse \", verseNumber]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), manuscripts.filter(manuscript => manuscript.verses.some(v => v.verse_number === verseNumber)).map(manuscript => {\n        const verse = manuscript.verses.find(v => v.verse_number === verseNumber);\n        return /*#__PURE__*/_jsxDEV(Box, {\n          mb: 6,\n          children: /*#__PURE__*/_jsxDEV(Flex, {\n            ml: 6,\n            children: [/*#__PURE__*/_jsxDEV(Heading, {\n              size: \"md\",\n              mb: 2,\n              cursor: \"pointer\",\n              color: linkColor,\n              _hover: {\n                textDecoration: 'underline'\n              },\n              onClick: () => {\n                navigate(`/manuscript-viewer/${manuscript.filename.replace('.docx', '')}`, {\n                  state: {\n                    manuscriptId: manuscript.filename\n                  }\n                });\n              },\n              children: manuscript.filename.replace('.docx', '')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              fontSize: \"lg\",\n              ml: 4,\n              color: textColor,\n              children: verse === null || verse === void 0 ? void 0 : verse.verse_text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 17\n          }, this)\n        }, manuscript._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 15\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n}\n_s(VerseId, \"4PqlOJ199RLapxzFDSNj021PhSU=\", false, function () {\n  return [useLocation, useNavigate, useParams, useDisplaySettings];\n});\n_c = VerseId;\nexport default VerseId;\nvar _c;\n$RefreshReg$(_c, \"VerseId\");","map":{"version":3,"names":["React","useState","useEffect","Box","Flex","Heading","Text","Spinner","useLocation","useNavigate","useParams","NavigationBar","useDisplaySettings","jsxDEV","_jsxDEV","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","VerseId","_s","location","navigate","verseNumber","verseNumberParam","settings","locationState","state","manuscripts","setManuscripts","isLoading","setIsLoading","parseInt","textColor","theme","linkColor","fetchManuscripts","response","fetch","ok","Error","data","json","transformedData","map","manuscript","verses","verse","Array","isArray","verse_number","verse_text","error","console","children","fileName","_jsxFileName","lineNumber","columnNumber","justify","align","height","size","bg","py","px","fontWeight","ml","color","p","mb","filter","some","v","find","cursor","_hover","textDecoration","onClick","filename","replace","manuscriptId","fontSize","_id","_c","$RefreshReg$"],"sources":["/Users/brycemolnar/Documents/bbbbbb/CS-410-Senior-Project-Editing-Tool/frontend/src/pages/verse/VerseId.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Box, Flex, Heading, Text, Spinner } from '@chakra-ui/react';\nimport { useLocation, useNavigate, useParams } from 'react-router-dom';\nimport NavigationBar from '../../components/NavigationBar.tsx';\nimport { useDisplaySettings } from '../../contexts/DisplaySettingsContext.tsx';\n\ninterface LocationState {\n  verseNumber?: number;\n  verseText?: string;\n}\n\ninterface Manuscript {\n  _id: string;\n  filename: string;\n  metadata: {\n    'MS ID:': string;\n    'Other Names:': string;\n    'Contents:': string;\n    'Date:': string;\n    'Origin:': string;\n    'Total Folia:': string;\n    'Dimensions:': string;\n    'Materials:': string;\n    'Laod. Folia:': string;\n    'Format Description:': string;\n  };\n  verses: {\n    verse_number: number;\n    verse_text: string;\n  }[];\n}\n\n// API base URL - can be configured based on environment\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:8000';\n\nfunction VerseId() {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const { verseNumber: verseNumberParam } = useParams();\n  const { settings } = useDisplaySettings();\n  const locationState = location.state as LocationState;\n  const [manuscripts, setManuscripts] = useState<Manuscript[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  \n  // Get verse number from either URL param or location state\n  const verseNumber = verseNumberParam ? parseInt(verseNumberParam) : locationState?.verseNumber;\n\n  // Theme-based colors\n  const textColor = settings.theme === 'dark' ? 'gray.100' : 'gray.900';\n  const linkColor = settings.theme === 'dark' ? 'blue.300' : 'blue.600';\n\n  useEffect(() => {\n    async function fetchManuscripts() {\n      try {\n        setIsLoading(true);\n        const response = await fetch(`${API_BASE_URL}/api/documents/`);\n        if (!response.ok) {\n          throw new Error('Failed to fetch manuscripts');\n        }\n        const data = await response.json();\n        \n        // Transform manuscripts to ensure consistent verse format\n        const transformedData = data.map((manuscript: any) => ({\n          ...manuscript,\n          verses: manuscript.verses.map((verse: any) => {\n            // If verse is a tuple [number, text]\n            if (Array.isArray(verse)) {\n              return {\n                verse_number: parseInt(verse[0]),\n                verse_text: verse[1]\n              };\n            }\n            // If verse is already an object {verse_number, verse_text}\n            return verse;\n          })\n        }));\n        \n        setManuscripts(transformedData);\n      } catch (error) {\n        console.error('Error fetching manuscripts:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    }\n\n    fetchManuscripts();\n  }, []);\n\n  if (!verseNumber) {\n    return <Box>No verse number provided</Box>;\n  }\n\n  if (isLoading) {\n    return (\n      <Box>\n        <NavigationBar />\n        <Flex justify=\"center\" align=\"center\" height=\"calc(100vh - 100px)\">\n          <Spinner size=\"xl\" />\n        </Flex>\n      </Box>\n    );\n  }\n\n  return (\n    <Box>\n      <NavigationBar />\n      <Box bg=\"#08004F\" py={8} px={6}>\n        <Heading fontWeight=\"normal\" ml={8} color=\"lightgray\" size=\"lg\">Verse View</Heading>\n      </Box>\n      <Box p={6} ml={8}>\n        <Heading size=\"lg\" mb={4} color={textColor}>Verse {verseNumber}</Heading>\n        {manuscripts\n          .filter(manuscript => manuscript.verses.some(v => v.verse_number === verseNumber))\n          .map((manuscript) => {\n            const verse = manuscript.verses.find(v => v.verse_number === verseNumber);\n            return (\n              <Box key={manuscript._id} mb={6}>\n                <Flex ml={6}>\n                  <Heading \n                    size=\"md\" \n                    mb={2} \n                    cursor=\"pointer\"\n                    color={linkColor}\n                    _hover={{ textDecoration: 'underline' }}\n                    onClick={() => {\n                      navigate(`/manuscript-viewer/${manuscript.filename.replace('.docx', '')}`, {\n                        state: { manuscriptId: manuscript.filename }\n                      });\n                    }}\n                  >\n                    {manuscript.filename.replace('.docx', '')}\n                  </Heading>\n                  <Text fontSize=\"lg\" ml={4} color={textColor}>{verse?.verse_text}</Text>\n                </Flex>\n              </Box>\n            );\n        })}\n      </Box>\n    </Box>\n  );\n}\n\nexport default VerseId;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}