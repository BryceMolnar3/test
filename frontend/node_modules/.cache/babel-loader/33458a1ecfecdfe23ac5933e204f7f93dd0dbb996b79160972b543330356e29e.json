{"ast":null,"code":"var _jsxFileName = \"/Users/brycemolnar/Documents/bbbbbb/CS-410-Senior-Project-Editing-Tool/frontend/src/pages/SearchDatabase.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Box, Flex, Heading, Text, Input, Button, Table, Thead, Tbody, Tr, Th, Td, useToast, Select, Stack } from '@chakra-ui/react';\nimport NavigationBar from '../components/NavigationBar.tsx';\nimport { useNavigate } from 'react-router-dom';\n\n// Define the Manuscript interface to match MongoDB structure\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// Helper function to convert MongoDB manuscript to frontend format\nfunction convertManuscript(mongoManuscript) {\n  return {\n    _id: mongoManuscript._id,\n    filename: mongoManuscript.filename,\n    metadata: mongoManuscript.metadata,\n    verses: mongoManuscript.verses.map(([number, text]) => ({\n      verse_number: parseInt(number),\n      verse_text: text\n    }))\n  };\n}\n\n// API base URL - can be configured based on environment\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:8000';\nfunction sortManuscripts(manuscripts, sortOption) {\n  const sortedManuscripts = [...manuscripts];\n  switch (sortOption) {\n    case 'date-asc':\n      return sortedManuscripts.sort((a, b) => {\n        var _a$metadata$Date$mat, _b$metadata$Date$mat;\n        const yearA = parseInt(((_a$metadata$Date$mat = a.metadata['Date:'].match(/\\d+/)) === null || _a$metadata$Date$mat === void 0 ? void 0 : _a$metadata$Date$mat[0]) || '0');\n        const yearB = parseInt(((_b$metadata$Date$mat = b.metadata['Date:'].match(/\\d+/)) === null || _b$metadata$Date$mat === void 0 ? void 0 : _b$metadata$Date$mat[0]) || '0');\n        return yearA - yearB;\n      });\n    case 'date-desc':\n      return sortedManuscripts.sort((a, b) => {\n        var _a$metadata$Date$mat2, _b$metadata$Date$mat2;\n        const yearA = parseInt(((_a$metadata$Date$mat2 = a.metadata['Date:'].match(/\\d+/)) === null || _a$metadata$Date$mat2 === void 0 ? void 0 : _a$metadata$Date$mat2[0]) || '0');\n        const yearB = parseInt(((_b$metadata$Date$mat2 = b.metadata['Date:'].match(/\\d+/)) === null || _b$metadata$Date$mat2 === void 0 ? void 0 : _b$metadata$Date$mat2[0]) || '0');\n        return yearB - yearA;\n      });\n    case 'origin-az':\n      return sortedManuscripts.sort((a, b) => a.metadata['Origin:'].localeCompare(b.metadata['Origin:']));\n    case 'origin-za':\n      return sortedManuscripts.sort((a, b) => b.metadata['Origin:'].localeCompare(a.metadata['Origin:']));\n    case 'country-az':\n      return sortedManuscripts.sort((a, b) => {\n        const countryA = getCountryFromOrigin(a.metadata['Origin:']);\n        const countryB = getCountryFromOrigin(b.metadata['Origin:']);\n        const countryCompare = countryA.localeCompare(countryB);\n        if (countryCompare === 0) {\n          return a.metadata['Origin:'].localeCompare(b.metadata['Origin:']);\n        }\n        return countryCompare;\n      });\n    case 'country-za':\n      return sortedManuscripts.sort((a, b) => {\n        const countryA = getCountryFromOrigin(a.metadata['Origin:']);\n        const countryB = getCountryFromOrigin(b.metadata['Origin:']);\n        const countryCompare = countryB.localeCompare(countryA);\n        if (countryCompare === 0) {\n          return b.metadata['Origin:'].localeCompare(a.metadata['Origin:']);\n        }\n        return countryCompare;\n      });\n    case 'msid-az':\n      return sortedManuscripts.sort((a, b) => a.metadata['MS ID:'].localeCompare(b.metadata['MS ID:']));\n    case 'msid-za':\n      return sortedManuscripts.sort((a, b) => b.metadata['MS ID:'].localeCompare(a.metadata['MS ID:']));\n    case 'other-names-az':\n      return sortedManuscripts.sort((a, b) => a.metadata['Other Names:'].localeCompare(b.metadata['Other Names:']));\n    case 'other-names-za':\n      return sortedManuscripts.sort((a, b) => b.metadata['Other Names:'].localeCompare(a.metadata['Other Names:']));\n    case 'sigla-asc':\n      return sortedManuscripts.sort((a, b) => a.filename.localeCompare(b.filename));\n    case 'sigla-desc':\n      return sortedManuscripts.sort((a, b) => b.filename.localeCompare(a.filename));\n    default:\n      return sortedManuscripts;\n  }\n}\n\n// API service for manuscript operations\nconst manuscriptService = {\n  async getAllManuscripts() {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/documents/`);\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(`Failed to fetch manuscripts: ${errorText}`);\n      }\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      console.error('Error fetching manuscripts:', error);\n      throw error;\n    }\n  },\n  async searchManuscripts(query) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/documents/search/?q=${encodeURIComponent(query)}`);\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(`Failed to search manuscripts: ${errorText}`);\n      }\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      console.error('Error searching manuscripts:', error);\n      throw error;\n    }\n  },\n  async deleteManuscript(filename) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/documents/${filename}/delete`, {\n        method: 'DELETE'\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(`Failed to delete manuscript: ${errorText}`);\n      }\n    } catch (error) {\n      console.error('Error deleting manuscript:', error);\n      throw error;\n    }\n  },\n  async getSortedManuscripts(manuscripts, sortOption) {\n    try {\n      // Since the backend doesn't support sorting yet, we'll do it client-side\n      return sortManuscripts(manuscripts, sortOption);\n    } catch (error) {\n      console.error('Error sorting manuscripts:', error);\n      throw error;\n    }\n  }\n};\nfunction normalizeCountry(country) {\n  // Remove leading/trailing spaces and convert to lowercase for comparison\n  const normalized = country.trim().toLowerCase();\n\n  // Handle geographic indicators first\n  if (normalized.includes('northern') || normalized.includes('southern') || normalized.includes('eastern') || normalized.includes('western') || normalized.includes('central')) {\n    // Return the full normalized string since it likely contains important geographic context\n    return normalized.split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');\n  }\n\n  // Split into words and check if any word is a likely country name\n  // Countries tend to be single words and longer than 3 letters\n  const words = normalized.split(/[\\s,]+/);\n  const likelyCountry = words.find(word => word.length > 3 && !['the', 'and', 'near', 'region', 'province', 'city'].includes(word));\n  if (likelyCountry) {\n    return likelyCountry.charAt(0).toUpperCase() + likelyCountry.slice(1);\n  }\n\n  // If no country detected, capitalize first letter of each word\n  return country.trim().split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()).join(' ');\n}\nfunction getCountryFromOrigin(origin) {\n  const parts = origin.split(',');\n  let country;\n  if (parts.length > 1) {\n    // If there's a comma, use the last part (country)\n    country = parts[parts.length - 1].trim();\n  } else {\n    // If no comma, check if it's a city we know the country for\n    country = origin.trim();\n  }\n  return normalizeCountry(country);\n}\nfunction SearchDatabase() {\n  _s();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [manuscripts, setManuscripts] = useState([]);\n  const [sortBy, setSortBy] = useState('sigla-asc');\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  const toast = useToast();\n\n  // Load all manuscripts when component mounts\n  useEffect(() => {\n    async function loadInitialData() {\n      try {\n        setIsLoading(true);\n        setError(null);\n        const manuscripts = await manuscriptService.getAllManuscripts();\n        const sortedManuscripts = await manuscriptService.getSortedManuscripts(manuscripts, 'sigla-asc');\n        setManuscripts(sortedManuscripts);\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : 'Failed to load manuscripts';\n        setError(errorMessage);\n        toast({\n          title: 'Error loading manuscripts',\n          description: errorMessage,\n          status: 'error',\n          duration: 5000,\n          isClosable: true\n        });\n      } finally {\n        setIsLoading(false);\n      }\n    }\n    loadInitialData();\n  }, [toast]);\n  async function handleSort(e) {\n    const sortOption = e.target.value;\n    setSortBy(sortOption);\n    try {\n      setIsLoading(true);\n      setError(null);\n      const sortedResults = await manuscriptService.getSortedManuscripts(manuscripts, sortOption);\n      setManuscripts(sortedResults);\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Failed to sort manuscripts';\n      setError(errorMessage);\n      toast({\n        title: 'Error sorting manuscripts',\n        description: errorMessage,\n        status: 'error',\n        duration: 5000,\n        isClosable: true\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  }\n  async function handleSearch() {\n    if (!searchQuery.trim() && manuscripts.length === 0) {\n      // If empty query and no results, load all manuscripts\n      try {\n        setIsLoading(true);\n        setError(null);\n        const manuscripts = await manuscriptService.getAllManuscripts();\n        const sortedManuscripts = await manuscriptService.getSortedManuscripts(manuscripts, sortBy);\n        setManuscripts(sortedManuscripts);\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : 'Failed to load manuscripts';\n        setError(errorMessage);\n        toast({\n          title: 'Error loading manuscripts',\n          description: errorMessage,\n          status: 'error',\n          duration: 5000,\n          isClosable: true\n        });\n      } finally {\n        setIsLoading(false);\n      }\n      return;\n    }\n    try {\n      setIsLoading(true);\n      setError(null);\n      const results = await manuscriptService.searchManuscripts(searchQuery);\n      const sortedResults = await manuscriptService.getSortedManuscripts(results, sortBy);\n      setManuscripts(sortedResults);\n      if (results.length === 0) {\n        toast({\n          title: 'No results found',\n          status: 'info',\n          duration: 3000,\n          isClosable: true\n        });\n      }\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Failed to search manuscripts';\n      setError(errorMessage);\n      toast({\n        title: 'Error searching manuscripts',\n        description: errorMessage,\n        status: 'error',\n        duration: 5000,\n        isClosable: true\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  }\n  function handleViewManuscript(sigla) {\n    navigate(`/manuscript-viewer/${sigla}`);\n  }\n  const handleDelete = async filename => {\n    try {\n      await manuscriptService.deleteManuscript(filename);\n      // Refresh the manuscript list after deletion\n      const updatedManuscripts = manuscripts.filter(m => m.filename !== filename);\n      setManuscripts(updatedManuscripts);\n    } catch (error) {\n      console.error('Failed to delete manuscript:', error);\n      // You might want to show an error message to the user here\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: [/*#__PURE__*/_jsxDEV(NavigationBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        bg: \"#08004F\",\n        py: 8,\n        px: 6,\n        position: \"relative\",\n        children: /*#__PURE__*/_jsxDEV(Heading, {\n          fontWeight: \"normal\",\n          ml: 8,\n          color: \"lightgray\",\n          size: \"lg\",\n          children: \"Search Database\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        p: 8,\n        children: [error && /*#__PURE__*/_jsxDEV(Box, {\n          mb: 4,\n          p: 4,\n          bg: \"red.50\",\n          color: \"red.600\",\n          borderRadius: \"md\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Flex, {\n          gap: 4,\n          mb: 8,\n          alignItems: \"flex-start\",\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            flex: 1,\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"Search by MS ID, Sigla, Other Names, Place of Origin, Date...\",\n              value: searchQuery,\n              onChange: e => setSearchQuery(e.target.value),\n              size: \"lg\",\n              borderColor: \"gray.400\",\n              onKeyPress: e => {\n                if (e.key === 'Enter') {\n                  handleSearch();\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            width: \"200px\",\n            children: /*#__PURE__*/_jsxDEV(Select, {\n              size: \"lg\",\n              value: sortBy,\n              onChange: handleSort,\n              borderColor: \"gray.400\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"msid-az\",\n                children: \"MS ID (A-Z)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"msid-za\",\n                children: \"MS ID (Z-A)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"sigla-asc\",\n                children: \"Sigla (Ascending)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"sigla-desc\",\n                children: \"Sigla (Descending)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 435,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"other-names-az\",\n                children: \"Other Names (A-Z)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"other-names-za\",\n                children: \"Other Names (Z-A)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 437,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"date-asc\",\n                children: \"Date (Oldest First)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"date-desc\",\n                children: \"Date (Newest First)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 439,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"origin-az\",\n                children: \"City/Region (A-Z)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"origin-za\",\n                children: \"City/Region (Z-A)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"country-az\",\n                children: \"Country (A-Z)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 442,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"country-za\",\n                children: \"Country (Z-A)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            bg: \"#08004F\",\n            color: \"white\",\n            _hover: {\n              bg: \"#160082\"\n            },\n            onClick: handleSearch,\n            size: \"lg\",\n            px: 8,\n            isLoading: isLoading,\n            loadingText: \"Searching...\",\n            borderRadius: \"full\",\n            children: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this), manuscripts.length > 0 ? /*#__PURE__*/_jsxDEV(Table, {\n          variant: \"simple\",\n          children: [/*#__PURE__*/_jsxDEV(Thead, {\n            children: /*#__PURE__*/_jsxDEV(Tr, {\n              children: [/*#__PURE__*/_jsxDEV(Th, {\n                children: \"Sigla\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 465,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Th, {\n                children: \"MS ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 466,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Th, {\n                children: \"Other Names\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Th, {\n                children: \"Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Th, {\n                children: \"Origin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 469,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Th, {\n                children: \"Actions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 470,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Tbody, {\n            children: manuscripts.map(manuscript => /*#__PURE__*/_jsxDEV(Tr, {\n              children: [/*#__PURE__*/_jsxDEV(Td, {\n                children: manuscript.filename.replace('.docx', '')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Td, {\n                children: manuscript.metadata['MS ID:']\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 477,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Td, {\n                children: manuscript.metadata['Other Names:']\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 478,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Td, {\n                children: manuscript.metadata['Date:']\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Td, {\n                children: manuscript.metadata['Origin:']\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Td, {\n                children: /*#__PURE__*/_jsxDEV(Stack, {\n                  direction: \"row\",\n                  spacing: 2,\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    size: \"sm\",\n                    colorScheme: \"blue\",\n                    onClick: () => handleViewManuscript(manuscript.filename.replace('.docx', '')),\n                    children: \"View\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 483,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 482,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 481,\n                columnNumber: 21\n              }, this)]\n            }, manuscript._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Text, {\n          children: \"No manuscripts found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 396,\n    columnNumber: 5\n  }, this);\n}\n_s(SearchDatabase, \"4ogca/m7R2hMLILHEUnd8YVJU7I=\", false, function () {\n  return [useNavigate, useToast];\n});\n_c = SearchDatabase;\nexport default SearchDatabase;\nvar _c;\n$RefreshReg$(_c, \"SearchDatabase\");","map":{"version":3,"names":["React","useState","useEffect","Box","Flex","Heading","Text","Input","Button","Table","Thead","Tbody","Tr","Th","Td","useToast","Select","Stack","NavigationBar","useNavigate","jsxDEV","_jsxDEV","convertManuscript","mongoManuscript","_id","filename","metadata","verses","map","number","text","verse_number","parseInt","verse_text","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","sortManuscripts","manuscripts","sortOption","sortedManuscripts","sort","a","b","_a$metadata$Date$mat","_b$metadata$Date$mat","yearA","match","yearB","_a$metadata$Date$mat2","_b$metadata$Date$mat2","localeCompare","countryA","getCountryFromOrigin","countryB","countryCompare","manuscriptService","getAllManuscripts","response","fetch","ok","errorText","Error","data","json","error","console","searchManuscripts","query","encodeURIComponent","deleteManuscript","method","getSortedManuscripts","normalizeCountry","country","normalized","trim","toLowerCase","includes","split","word","charAt","toUpperCase","slice","join","words","likelyCountry","find","length","origin","parts","SearchDatabase","_s","searchQuery","setSearchQuery","isLoading","setIsLoading","setManuscripts","sortBy","setSortBy","setError","navigate","toast","loadInitialData","errorMessage","message","title","description","status","duration","isClosable","handleSort","e","target","value","sortedResults","handleSearch","results","handleViewManuscript","sigla","handleDelete","updatedManuscripts","filter","m","children","fileName","_jsxFileName","lineNumber","columnNumber","bg","py","px","position","fontWeight","ml","color","size","p","mb","borderRadius","gap","alignItems","flex","placeholder","onChange","borderColor","onKeyPress","key","width","_hover","onClick","loadingText","variant","manuscript","replace","direction","spacing","colorScheme","_c","$RefreshReg$"],"sources":["/Users/brycemolnar/Documents/bbbbbb/CS-410-Senior-Project-Editing-Tool/frontend/src/pages/SearchDatabase.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Box, \n  Flex, \n  Heading, \n  Text, \n  Input,\n  Button,\n  VStack,\n  Table,\n  Thead,\n  Tbody,\n  Tr,\n  Th,\n  Td,\n  useToast,\n  Select,\n  Stack,\n  FormControl,\n  FormLabel\n} from '@chakra-ui/react';\nimport NavigationBar from '../components/NavigationBar.tsx';\nimport { useNavigate } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\n\n// Define the Manuscript interface to match MongoDB structure\ninterface Manuscript {\n  _id: string;\n  filename: string;\n  metadata: {\n    'MS ID:': string;\n    'Other Names:': string;\n    'Contents:': string;\n    'Date:': string;\n    'Origin:': string;\n    'Total Folia:': string;\n    'Dimensions:': string;\n    'Materials:': string;\n    'Laod. Folia:': string;\n    'Format Description:': string;\n  };\n  verses: {\n    verse_number: number;\n    verse_text: string;\n  }[];\n}\n\n// Helper function to convert MongoDB manuscript to frontend format\nfunction convertManuscript(mongoManuscript: any): Manuscript {\n  return {\n    _id: mongoManuscript._id,\n    filename: mongoManuscript.filename,\n    metadata: mongoManuscript.metadata,\n    verses: mongoManuscript.verses.map(([number, text]: [string, string]) => ({\n      verse_number: parseInt(number),\n      verse_text: text\n    }))\n  };\n}\n\n// API base URL - can be configured based on environment\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:8000';\n\nfunction sortManuscripts(manuscripts: Manuscript[], sortOption: SortOption): Manuscript[] {\n  const sortedManuscripts = [...manuscripts];\n  \n  switch (sortOption) {\n    case 'date-asc':\n      return sortedManuscripts.sort((a, b) => {\n        const yearA = parseInt(a.metadata['Date:'].match(/\\d+/)?.[0] || '0');\n        const yearB = parseInt(b.metadata['Date:'].match(/\\d+/)?.[0] || '0');\n        return yearA - yearB;\n      });\n    \n    case 'date-desc':\n      return sortedManuscripts.sort((a, b) => {\n        const yearA = parseInt(a.metadata['Date:'].match(/\\d+/)?.[0] || '0');\n        const yearB = parseInt(b.metadata['Date:'].match(/\\d+/)?.[0] || '0');\n        return yearB - yearA;\n      });\n\n    case 'origin-az':\n      return sortedManuscripts.sort((a, b) => \n        a.metadata['Origin:'].localeCompare(b.metadata['Origin:'])\n      );\n\n    case 'origin-za':\n      return sortedManuscripts.sort((a, b) => \n        b.metadata['Origin:'].localeCompare(a.metadata['Origin:'])\n      );\n\n    case 'country-az':\n      return sortedManuscripts.sort((a, b) => {\n        const countryA = getCountryFromOrigin(a.metadata['Origin:']);\n        const countryB = getCountryFromOrigin(b.metadata['Origin:']);\n        \n        const countryCompare = countryA.localeCompare(countryB);\n        \n        if (countryCompare === 0) {\n          return a.metadata['Origin:'].localeCompare(b.metadata['Origin:']);\n        }\n        \n        return countryCompare;\n      });\n\n    case 'country-za':\n      return sortedManuscripts.sort((a, b) => {\n        const countryA = getCountryFromOrigin(a.metadata['Origin:']);\n        const countryB = getCountryFromOrigin(b.metadata['Origin:']);\n        \n        const countryCompare = countryB.localeCompare(countryA);\n        \n        if (countryCompare === 0) {\n          return b.metadata['Origin:'].localeCompare(a.metadata['Origin:']);\n        }\n        \n        return countryCompare;\n      });\n    \n    case 'msid-az':\n      return sortedManuscripts.sort((a, b) => \n        a.metadata['MS ID:'].localeCompare(b.metadata['MS ID:'])\n      );\n\n    case 'msid-za':\n      return sortedManuscripts.sort((a, b) => \n        b.metadata['MS ID:'].localeCompare(a.metadata['MS ID:'])\n      );\n\n    case 'other-names-az':\n      return sortedManuscripts.sort((a, b) => \n        a.metadata['Other Names:'].localeCompare(b.metadata['Other Names:'])\n      );\n\n    case 'other-names-za':\n      return sortedManuscripts.sort((a, b) => \n        b.metadata['Other Names:'].localeCompare(a.metadata['Other Names:'])\n      );\n    \n    case 'sigla-asc':\n      return sortedManuscripts.sort((a, b) => \n        a.filename.localeCompare(b.filename)\n      );\n    \n    case 'sigla-desc':\n      return sortedManuscripts.sort((a, b) => \n        b.filename.localeCompare(a.filename)\n      );\n    \n    default:\n      return sortedManuscripts;\n  }\n}\n\n// API service for manuscript operations\nconst manuscriptService = {\n  async getAllManuscripts(): Promise<Manuscript[]> {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/documents/`);\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(`Failed to fetch manuscripts: ${errorText}`);\n      }\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      console.error('Error fetching manuscripts:', error);\n      throw error;\n    }\n  },\n\n  async searchManuscripts(query: string): Promise<Manuscript[]> {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/documents/search/?q=${encodeURIComponent(query)}`);\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(`Failed to search manuscripts: ${errorText}`);\n      }\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      console.error('Error searching manuscripts:', error);\n      throw error;\n    }\n  },\n\n  async deleteManuscript(filename: string): Promise<void> {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/documents/${filename}/delete`, {\n        method: 'DELETE',\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(`Failed to delete manuscript: ${errorText}`);\n      }\n    } catch (error) {\n      console.error('Error deleting manuscript:', error);\n      throw error;\n    }\n  },\n\n  async getSortedManuscripts(manuscripts: Manuscript[], sortOption: SortOption): Promise<Manuscript[]> {\n    try {\n      // Since the backend doesn't support sorting yet, we'll do it client-side\n      return sortManuscripts(manuscripts, sortOption);\n    } catch (error) {\n      console.error('Error sorting manuscripts:', error);\n      throw error;\n    }\n  }\n};\n\ntype SortOption = 'date-asc' | 'date-desc' | 'origin-az' | 'origin-za' | 'country-az' | 'country-za' | \n                  'sigla-asc' | 'sigla-desc' | 'msid-az' | 'msid-za' | 'other-names-az' | 'other-names-za';\n\nfunction normalizeCountry(country: string): string {\n  // Remove leading/trailing spaces and convert to lowercase for comparison\n  const normalized = country.trim().toLowerCase();\n  \n  // Handle geographic indicators first\n  if (normalized.includes('northern') || normalized.includes('southern') ||\n      normalized.includes('eastern') || normalized.includes('western') ||\n      normalized.includes('central')) {\n    // Return the full normalized string since it likely contains important geographic context\n    return normalized.split(' ')\n      .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n      .join(' ');\n  }\n\n  // Split into words and check if any word is a likely country name\n  // Countries tend to be single words and longer than 3 letters\n  const words = normalized.split(/[\\s,]+/);\n  const likelyCountry = words.find(word => \n    word.length > 3 && \n    !['the', 'and', 'near', 'region', 'province', 'city'].includes(word)\n  );\n\n  if (likelyCountry) {\n    return likelyCountry.charAt(0).toUpperCase() + likelyCountry.slice(1);\n  }\n  \n  // If no country detected, capitalize first letter of each word\n  return country.trim()\n    .split(' ')\n    .map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())\n    .join(' ');\n}\n\nfunction getCountryFromOrigin(origin: string): string {\n  const parts = origin.split(',');\n  let country;\n  \n  if (parts.length > 1) {\n    // If there's a comma, use the last part (country)\n    country = parts[parts.length - 1].trim();\n  } else {\n    // If no comma, check if it's a city we know the country for\n    country = origin.trim();\n  }\n  \n  return normalizeCountry(country);\n}\n\nfunction SearchDatabase() {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [manuscripts, setManuscripts] = useState<Manuscript[]>([]);\n  const [sortBy, setSortBy] = useState<SortOption>('sigla-asc');\n  const [error, setError] = useState<string | null>(null);\n  const navigate = useNavigate();\n  const toast = useToast();\n\n  // Load all manuscripts when component mounts\n  useEffect(() => {\n    async function loadInitialData() {\n      try {\n        setIsLoading(true);\n        setError(null);\n        const manuscripts = await manuscriptService.getAllManuscripts();\n        const sortedManuscripts = await manuscriptService.getSortedManuscripts(manuscripts, 'sigla-asc');\n        setManuscripts(sortedManuscripts);\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : 'Failed to load manuscripts';\n        setError(errorMessage);\n        toast({\n          title: 'Error loading manuscripts',\n          description: errorMessage,\n          status: 'error',\n          duration: 5000,\n          isClosable: true,\n        });\n      } finally {\n        setIsLoading(false);\n      }\n    }\n\n    loadInitialData();\n  }, [toast]);\n\n  async function handleSort(e: React.ChangeEvent<HTMLSelectElement>) {\n    const sortOption = e.target.value as SortOption;\n    setSortBy(sortOption);\n    \n    try {\n      setIsLoading(true);\n      setError(null);\n      const sortedResults = await manuscriptService.getSortedManuscripts(manuscripts, sortOption);\n      setManuscripts(sortedResults);\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Failed to sort manuscripts';\n      setError(errorMessage);\n      toast({\n        title: 'Error sorting manuscripts',\n        description: errorMessage,\n        status: 'error',\n        duration: 5000,\n        isClosable: true,\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  }\n\n  async function handleSearch() {\n    if (!searchQuery.trim() && manuscripts.length === 0) {\n      // If empty query and no results, load all manuscripts\n      try {\n        setIsLoading(true);\n        setError(null);\n        const manuscripts = await manuscriptService.getAllManuscripts();\n        const sortedManuscripts = await manuscriptService.getSortedManuscripts(manuscripts, sortBy);\n        setManuscripts(sortedManuscripts);\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : 'Failed to load manuscripts';\n        setError(errorMessage);\n        toast({\n          title: 'Error loading manuscripts',\n          description: errorMessage,\n          status: 'error',\n          duration: 5000,\n          isClosable: true,\n        });\n      } finally {\n        setIsLoading(false);\n      }\n      return;\n    }\n\n    try {\n      setIsLoading(true);\n      setError(null);\n      const results = await manuscriptService.searchManuscripts(searchQuery);\n      const sortedResults = await manuscriptService.getSortedManuscripts(results, sortBy);\n      setManuscripts(sortedResults);\n\n      if (results.length === 0) {\n        toast({\n          title: 'No results found',\n          status: 'info',\n          duration: 3000,\n          isClosable: true,\n        });\n      }\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Failed to search manuscripts';\n      setError(errorMessage);\n      toast({\n        title: 'Error searching manuscripts',\n        description: errorMessage,\n        status: 'error',\n        duration: 5000,\n        isClosable: true,\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  }\n\n  function handleViewManuscript(sigla: string) {\n    navigate(`/manuscript-viewer/${sigla}`);\n  }\n\n  const handleDelete = async (filename: string) => {\n    try {\n      await manuscriptService.deleteManuscript(filename);\n      // Refresh the manuscript list after deletion\n      const updatedManuscripts = manuscripts.filter(m => m.filename !== filename);\n      setManuscripts(updatedManuscripts);\n    } catch (error) {\n      console.error('Failed to delete manuscript:', error);\n      // You might want to show an error message to the user here\n    }\n  };\n\n  return (\n    <Box>\n      <NavigationBar />\n      <Box>\n        <Box bg=\"#08004F\" py={8} px={6} position=\"relative\">\n          <Heading fontWeight=\"normal\" ml={8} color=\"lightgray\" size=\"lg\">Search Database</Heading>\n        </Box>\n\n        <Box p={8}>\n          {error && (\n            <Box mb={4} p={4} bg=\"red.50\" color=\"red.600\" borderRadius=\"md\">\n              {error}\n            </Box>\n          )}\n\n          <Flex gap={4} mb={8} alignItems=\"flex-start\">\n            <Box flex={1}>\n              <Input\n                placeholder=\"Search by MS ID, Sigla, Other Names, Place of Origin, Date...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                size=\"lg\"\n                borderColor=\"gray.400\"\n                onKeyPress={(e) => {\n                  if (e.key === 'Enter') {\n                    handleSearch();\n                  }\n                }}\n              />\n            </Box>\n            <Box width=\"200px\">\n              <Select\n                size=\"lg\"\n                value={sortBy}\n                onChange={handleSort}\n                borderColor=\"gray.400\"\n              >\n                <option value=\"msid-az\">MS ID (A-Z)</option>\n                <option value=\"msid-za\">MS ID (Z-A)</option>\n                <option value=\"sigla-asc\">Sigla (Ascending)</option>\n                <option value=\"sigla-desc\">Sigla (Descending)</option>\n                <option value=\"other-names-az\">Other Names (A-Z)</option>\n                <option value=\"other-names-za\">Other Names (Z-A)</option>\n                <option value=\"date-asc\">Date (Oldest First)</option>\n                <option value=\"date-desc\">Date (Newest First)</option>\n                <option value=\"origin-az\">City/Region (A-Z)</option>\n                <option value=\"origin-za\">City/Region (Z-A)</option>\n                <option value=\"country-az\">Country (A-Z)</option>\n                <option value=\"country-za\">Country (Z-A)</option>\n              </Select>\n            </Box>\n            <Button\n              bg=\"#08004F\"\n              color=\"white\"\n              _hover={{ bg: \"#160082\" }}\n              onClick={handleSearch}\n              size=\"lg\"\n              px={8}\n              isLoading={isLoading}\n              loadingText=\"Searching...\"\n              borderRadius=\"full\"\n            >\n              Search\n            </Button>\n          </Flex>\n\n          {manuscripts.length > 0 ? (\n            <Table variant=\"simple\">\n              <Thead>\n                <Tr>\n                  <Th>Sigla</Th>\n                  <Th>MS ID</Th>\n                  <Th>Other Names</Th>\n                  <Th>Date</Th>\n                  <Th>Origin</Th>\n                  <Th>Actions</Th>\n                </Tr>\n              </Thead>\n              <Tbody>\n                {manuscripts.map((manuscript) => (\n                  <Tr key={manuscript._id}>\n                    <Td>{manuscript.filename.replace('.docx', '')}</Td>\n                    <Td>{manuscript.metadata['MS ID:']}</Td>\n                    <Td>{manuscript.metadata['Other Names:']}</Td>\n                    <Td>{manuscript.metadata['Date:']}</Td>\n                    <Td>{manuscript.metadata['Origin:']}</Td>\n                    <Td>\n                      <Stack direction=\"row\" spacing={2}>\n                        <Button\n                          size=\"sm\"\n                          colorScheme=\"blue\"\n                          onClick={() => handleViewManuscript(manuscript.filename.replace('.docx', ''))}\n                        >\n                          View\n                        </Button>\n                      </Stack>\n                    </Td>\n                  </Tr>\n                ))}\n              </Tbody>\n            </Table>\n          ) : (\n            <Text>No manuscripts found</Text>\n          )}\n        </Box>\n      </Box>\n    </Box>\n  );\n}\n\nexport default SearchDatabase; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}